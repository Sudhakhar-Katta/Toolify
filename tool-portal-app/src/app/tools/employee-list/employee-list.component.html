<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light px-4">
  <a class="navbar-brand" href="#">
    <img src="https://marketplace.btisinc.com/wp-content/uploads/2023/12/cropped-btis-logo-3-300x100.png" width="180" height="60" alt="Logo" />
  </a>
</nav>

<!-- Main content -->
<div class="main-content container">
  <h2 class="title">Employee List</h2>

  <!-- Search + Add User -->
  <div class="search-add-wrapper">
    <input
      type="text"
      class="search-input"
      placeholder="Search by name, email, or role..."
      [(ngModel)]="searchTerm"
      (input)="filterEmployees()"
    />
    <button class="add-user-btn" (click)="openAddUserModal()">Add Employee</button>
  </div>

  <!-- Table -->
  <div class="table-wrapper">
    <table class="custom-table">
      <thead>
        <tr>
          <th>NAME</th>
          <th>CITY</th>
          <th>STATE</th>
          <th>EMAIL</th>
          <th>PHONE</th>
          <th>ROLE</th>
          <th>SOFTWARE</th> <!-- single column -->
          <th>ACTIONS</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let emp of filteredEmployees">
          <td>{{ emp.firstName }} {{ emp.lastName }}</td>
          <td>{{ emp.city }}</td>
          <td>{{ emp.state }}</td>
          <td>{{ emp.workEmail }}</td>
          <td>{{ emp.phone }}</td>
          <td>{{ emp.role }}</td>

          <!-- Comma-separated software list -->
        <td class="truncate"
        [title]="
        (emp.software1 || '') +
        (emp.software2 ? ', ' + emp.software2 : '') +
        (emp.software3 ? ', ' + emp.software3 : '') +
        (emp.software4 ? ', ' + emp.software4 : '') +
        (emp.software5 ? ', ' + emp.software5 : '') +
        (emp.software6 ? ', ' + emp.software6 : '') +
        (emp.software7 ? ', ' + emp.software7 : '') +
        (emp.software8 ? ', ' + emp.software8 : '') +
        (emp.software9 ? ', ' + emp.software9 : '') +
        (emp.software10 ? ', ' + emp.software10 : '')
      ">
    {{
        (emp.software1 || '') +
        (emp.software2 ? ', ' + emp.software2 : '') +
        (emp.software3 ? ', ' + emp.software3 : '') +
        (emp.software4 ? ', ' + emp.software4 : '') +
        (emp.software5 ? ', ' + emp.software5 : '') +
        (emp.software6 ? ', ' + emp.software6 : '') +
        (emp.software7 ? ', ' + emp.software7 : '') +
        (emp.software8 ? ', ' + emp.software8 : '') +
        (emp.software9 ? ', ' + emp.software9 : '') +
        (emp.software10 ? ', ' + emp.software10 : '')
          }}
      </td>


          <td>
            <button class="action-btn edit" (click)="updateEmployee(emp)">‚úèÔ∏è</button>
            <button class="action-btn delete" (click)="deleteEmployee(emp.id)">üóëÔ∏è</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="download-container">
      <button class="fancy-download-button" (click)="downloadCSV()">
        <span class="icon">üì•</span>
        <span>Download CSV</span>
      </button>
    </div>
  </div>

  <!-- Add Modal -->
  <div *ngIf="showAddUserModal" class="app-modal-backdrop">
    <div class="app-modal">
      <h2 class="app-modal-title">Add New Employee</h2>

      <div class="app-form-grid">
        <input placeholder="First Name" [(ngModel)]="newUser.firstName" />
        <input placeholder="Last Name" [(ngModel)]="newUser.lastName" />

        <input placeholder="City" [(ngModel)]="newUser.city" />
        <input placeholder="State" [(ngModel)]="newUser.state" />

        <input placeholder="Country" [(ngModel)]="newUser.country" class="col-span-2" />

        <input placeholder="Work Email" [(ngModel)]="newUser.workEmail" />
        <input placeholder="Personal Email" [(ngModel)]="newUser.personalEmail" />

        <input placeholder="Phone" [(ngModel)]="newUser.phone" />
        <input placeholder="Role" [(ngModel)]="newUser.role" />

        <input placeholder="Vendor" [(ngModel)]="newUser.vendor" />
        <input placeholder="Type" [(ngModel)]="newUser.type" />

        <!-- Software 1‚Äì10 -->
        <input placeholder="Software 1"  [(ngModel)]="newUser.software1" />
        <input placeholder="Software 2"  [(ngModel)]="newUser.software2" />
        <input placeholder="Software 3"  [(ngModel)]="newUser.software3" />
        <input placeholder="Software 4"  [(ngModel)]="newUser.software4" />
        <input placeholder="Software 5"  [(ngModel)]="newUser.software5" />
        <input placeholder="Software 6"  [(ngModel)]="newUser.software6" />
        <input placeholder="Software 7"  [(ngModel)]="newUser.software7" />
        <input placeholder="Software 8"  [(ngModel)]="newUser.software8" />
        <input placeholder="Software 9"  [(ngModel)]="newUser.software9" />
        <input placeholder="Software 10" [(ngModel)]="newUser.software10" />
      </div>

      <div class="app-form-actions">
        <button class="btn-primary" (click)="submitAddUser()">Add</button>
        <button class="btn-ghost" (click)="closeAddUserModal()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div *ngIf="showEditUserModal" class="app-modal-backdrop">
    <div class="app-modal">
      <h2 class="app-modal-title">Edit Employee</h2>

      <div class="app-form-grid">
        <!-- Name -->
        <input placeholder="First Name" [(ngModel)]="selectedUser.firstName" />
        <input placeholder="Last Name"  [(ngModel)]="selectedUser.lastName" />

        <!-- Location -->
        <input placeholder="City"    [(ngModel)]="selectedUser.city" />
        <input placeholder="State"   [(ngModel)]="selectedUser.state" />
        <input placeholder="Country" class="col-span-2" [(ngModel)]="selectedUser.country" />

        <!-- Emails -->
        <input placeholder="Work Email"     [(ngModel)]="selectedUser.workEmail" />
        <input placeholder="Personal Email" [(ngModel)]="selectedUser.personalEmail" />

        <!-- Contact / Role -->
        <input placeholder="Phone" [(ngModel)]="selectedUser.phone" />
        <input placeholder="Role"  [(ngModel)]="selectedUser.role" />

        <!-- Vendor / Type -->
        <input placeholder="Vendor" [(ngModel)]="selectedUser.vendor" />
        <input placeholder="Type"   [(ngModel)]="selectedUser.type" />

        <!-- Software 1‚Äì10 -->
        <ng-container *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]">
          <input [placeholder]="'Software ' + i"
                 [(ngModel)]="selectedUser['software' + i]" />
        </ng-container>
      </div>

      <div class="app-form-actions">
        <button class="btn-primary" (click)="submiteEditUser()">Save</button>
        <button class="btn-ghost"   (click)="closeEditUserModal()">Cancel</button>
      </div>
    </div>
  </div>
</div>
